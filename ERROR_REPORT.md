# π¨ n8n λ° μ™Έλ¶€ μ—°λ™ μ¤λ¥ λ¶„μ„ λ³΄κ³ μ„

μ•ν‹°κ·ΈλλΉ„ν‹°(AntiGravity)κ°€ μν–‰ν• ν΄λΌμ΄μ–ΈνΈ(μ•±) μ½”λ“ κ²€μ¦κ³Ό μμ¨ ν…μ¤νΈ κ²°κ³Όλ¥Ό λ°”νƒ•μΌλ΅, ν„μ¬ λ°μƒν•λ” λ¬Έμ μ μ›μΈμ΄ **μ•± λ‚΄λ¶€κ°€ μ•„λ‹ μ™Έλ¶€(n8n μ›ν¬ν”λ΅μ° λλ” μΈν”„λΌ)**μ— μμμ„ μ§„λ‹¨ν–μµλ‹λ‹¤. μ΄κ΄„ μ λ―Έλ‚μ΄ λλ” n8n κ΄€λ¦¬μκ°€ ν•΄κ²°ν•΄μ•Ό ν•  μ‚¬ν•­μ„ μ •λ¦¬ν•©λ‹λ‹¤.

## 1. ν„μ¬ μƒν™© λ° μ§„λ‹¨
*   **μ•±(Front-end) μƒνƒ**: **μ •μƒ (Verified)**
    *   μ΄λ―Έμ§€ ν¬λ§·: `image/jpeg` (HEIC μλ™ λ³€ν™ λ° 1024px λ¦¬μ‚¬μ΄μ§• μ μ© μ™„λ£)
    *   μ „μ†΅ λ°©μ‹: `Multipart/FormData` ν‘μ¤€ μ¤€μ (ν•„λ“λ…: `data`, νμΌλ…: `image.jpg`)
    *   μμ™Έ μ²λ¦¬: λΉ κ°’, λ¶€λ¶„ λ°μ΄ν„°μ— λ€ν• μ•μ „μ¥μΉ(`AddEntry.tsx`) μ μ© μ™„λ£.
*   **λ„¤νΈμ›ν¬ μƒνƒ**: **μ •μƒ (Verified)**
    *   `test-upload.ts` μ¤ν¬λ¦½νΈλ¥Ό ν†µν• 3ν μ—°μ† μ ‘μ† ν…μ¤νΈ μ„±κ³µ.
    *   n8n μ„λ²„λ΅λ¶€ν„° HTTP 200 OK λ° JSON μ‘λ‹µ μμ‹  ν™•μΈ.
*   **λ°μƒ μ¤λ¥**: **λ‚΄μ© μ—†μ (Empty Output) / λ¶„μ„ μ‹¤ν¨**
    *   ν†µμ‹ μ€ μ„±κ³µν•μ§€λ§, n8nμ΄ λλ ¤μ£Όλ” λ°μ΄ν„°κ°€ `{}`(λΉ κ°μ²΄)μ΄κ±°λ‚ AI λ¶„μ„ κ²°κ³Όκ°€ λΉ„μ–΄μμ.

## 2. μ™Έλ¶€ μ΄μ μ¶”μ • μ›μΈ (External Root Causes)
λ‹¤μ ν•­λ©λ“¤μ€ μ•± μ½”λ“ μμ •μΌλ΅λ” ν•΄κ²°ν•  μ μ—†μΌλ©°, **n8n μ„¤μ • λλ” μ‹¤ν–‰ ν™κ²½**μ ν™•μΈμ΄ ν•„μ”ν•©λ‹λ‹¤.

### A. n8n μ›ν¬ν”λ΅μ° μ‹¤ν–‰ μ¤λ¥ (κ°€μ¥ μ λ ¥)
*   **μ¦μƒ**: μ”μ²­μ€ λ°›μ§€λ§ AIκ°€ λ‚΄μ©μ„ μ¶”μ¶ν•μ§€ λ»ν•¨.
*   **μ κ²€ ν¬μΈνΈ**: n8n λ€μ‹λ³΄λ“μ `Executions` νƒ­ ν™•μΈ.
    1.  **AI λ¨λΈ μ—λ¬**: OpenAI/Google Gemini API ν‚¤ λ§λ£, μΏΌν„° μ΄κ³Ό, λλ” λ¨λΈ νƒ€μ„μ•„μ›ƒ λ°μƒ μ—¬λ¶€.
    2.  **λ°”μ΄λ„λ¦¬ μ²λ¦¬**: Webhook λ…Έλ“μ—μ„ `Binary Data`κ°€ ν™μ„±ν™”λμ–΄ μλ”μ§€, ν•„λ“λ… `data`κ°€ μ •ν™•ν λ§¤ν•‘λλ”μ§€ ν™•μΈ.
    3.  **JSON ν¬λ§·**: λ§μ§€λ§‰ `Response` λ…Έλ“κ°€ JSONμ„ λ‚΄λ³΄λ‚Ό λ•, AI κ²°κ³Όκ°€ μ—†λ” κ²½μ° λΉ JSONμ„ λ‚΄λ³΄λ‚΄κ³  μλ”μ§€ ν™•μΈ.

### B. Ngrok ν„°λ„λ§ λ¶μ•μ •
*   **μ¦μƒ**: κ°„ν—μ  μ—°κ²° λκΉ€ λλ” νƒ€μ„μ•„μ›ƒ.
*   **μ κ²€ ν¬μΈνΈ**:
    *   ν„μ¬ Ngrok μ„Έμ…μ΄ 56μ‹κ°„ μ΄μƒ μ§€μ†λ¨. λ¬΄λ£ ν‹°μ–΄μ κ²½μ° μ„Έμ… λ§λ£λ‚ λ€μ—­ν­ μ ν•μ΄ κ±Έλ¦΄ μ μμ.
    *   **μ΅°μΉ**: Ngrok ν„°λ„μ„ μ¬μ‹μ‘(`ctrl+c` ν›„ λ‹¤μ‹ μ‹¤ν–‰)ν•κ³  `.env`μ URLμ„ μµμ‹ ν™”ν•΄ λ³Ό ν•„μ”κ°€ μμ.

### C. μ΄λ―Έμ§€ μ©λ‰/μ‹κ°„ μ ν•
*   **μ¦μƒ**: n8nμ΄ λ€μ©λ‰ μ²λ¦¬ μ¤‘ λ©μ¶¤.
*   **μ κ²€ ν¬μΈνΈ**: n8n μμ²΄μ `Execution Timeout` μ„¤μ • λλ” Nginx ν”„λ΅μ‹(μ‚¬μ© μ‹)μ `client_max_body_size` μ ν• ν™•μΈ. (ν„μ¬ μ•±μ€ 1MB λ―Έλ§μΌλ΅ λ³΄λ‚΄λ―€λ΅ κ°€λ¥μ„±μ€ λ‚®μΌλ‚ ν™•μΈ ν•„μ”)

## 3. ν•΄κ²° μ”μ²­ μ‚¬ν•­ (Action Items)
1.  **n8n λ΅κ·Έ ν™•μΈ**: μ‹¤ν¨ν• μ‹¤ν–‰ λ‚΄μ—­(Execution ID)μ„ μ—΄μ–΄ μ–΄λ λ…Έλ“μ—μ„ λ©μ¶”κ±°λ‚ λ°μ΄ν„°λ¥Ό μƒμ–΄λ²„λ¦¬λ”μ§€ μ¤ν¬λ¦°μƒ· ν™•μΈ.
2.  **AI μ„λΉ„μ¤ μƒνƒ ν™•μΈ**: n8nμ— μ—°κ²°λ AI Credentialμ΄ μ ν¨ν•μ§€ ν…μ¤νΈ.
3.  **Ngrok μ¬κΈ°λ™**: λ„¤νΈμ›ν¬ λ³€μ μ°¨λ‹¨μ„ μ„ν•΄ ν„°λ„λ§ μ¬μ‹μ‘ κ¶μ¥.
